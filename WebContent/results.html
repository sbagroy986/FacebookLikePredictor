<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Results &#8226; AP Project</title>
    <link rel="shortcut icon" href="http://www.google.com/s2/favicons?domain=www.iiitd.ac.in" type="image/x-icon">

    <!-- Bootstrap Core CSS -->
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="./assets/css/small-business.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Page Content -->
    <div class="container">

        <!-- Heading Row -->
        <div class="row">
            <div class="col-md-8">
                <h1>Results</h1>
                <p>Using the data obtained from the Facebook graph API, we give you the following results:</p><br/><br/>
            </div>
            <div class="col-md-12" style="height:650px;">
                <div id="chart_div" style="height:600px;"></div>
            </div>
            <!-- /.col-md-8 -->
            <!-- /.col-md-4 -->
        </div>
        <!-- /.row -->

        <hr>

        <!-- Call to Action Well -->
        <div class="row">
            <div class="col-lg-12">
                <div class="well text-center">
                    <div id="three"></div>
                    <div id="five"></div>
                    <div id="ten"></div>
                    <div id="fif"></div>
                </div>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->

        <!-- Content Row -->
        <div class="row" id="posts">
        </div>
        <!-- /.row -->

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
		            <p>CSE 121 &copy; AP</p>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="./assets/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="./assets/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1.1','packages':['bar']}]}"></script>
	<script type="text/javascript">
	window.onload = function() {
	};
    google.setOnLoadCallback(drawChart);
    function decode_utf8(s) {
 	 return decodeURIComponent(escape(s));
	}
    function drawChart() {
	    var x = document.cookie;
	    var tkns = x.split(';');
	    var d = [];
	    d.push(['People','Number of likes']);
    	var map = {};
	    for(var i=0;i<tkns.length;i++)
	    {
	    	if(tkns[i].split("=")[0] == "url")
	    	{
	    		map[(tkns[i].split("=")[0]).replace(" ","")] = decode_utf8(tkns[i].split("=")[1]);	    		
	    	}
	    	else
	    	{
	    		map[(tkns[i].split("=")[0]).replace(" ","")] = decode_utf8(tkns[i].split("=")[1]);
	    	}
	    	console.log(tkns[i]);
	    	console.log(tkns[i].split("=")[0]);
	    	console.log(tkns[i].split("=")[1]);

	    	if(tkns[i].indexOf("Histo--") > -1)
	    	{
	    		var k = tkns[i].split("--");
	    		var t = new Array(2);
	    		t[0] = k[1].split("=")[0];
	    		t[1] = parseInt(k[1].split("=")[1]);
	    		console.log(t[0] + " : " + t[1]);
	    		d.push(t);
	    	}
	    	if(tkns[i].indexOf("accuracy_15") > -1)
	    	{
	    		var k = tkns[i].split("accuracy_15=");
	    		var div = document.getElementById('fif');
	    		div.innerHTML += 'Accuracy for predicted likes within a 15 like margin : <b>'+parseFloat(k[1]).toPrecision(4)+'%</b><br/>';
	    	}
	    	if(tkns[i].indexOf("accuracy_10") > -1)
	    	{
	    		var k = tkns[i].split("accuracy_10=");
	    		var div = document.getElementById('ten');
	    		div.innerHTML += 'Accuracy for predicted likes within a 10 like margin : <b>'+parseFloat(k[1]).toPrecision(4)+'%</b><br/>';
	    	}
	    	if(tkns[i].indexOf("accuracy_5") > -1)
	    	{
	    		var k = tkns[i].split("accuracy_5=");
	    		var div = document.getElementById('five');
	    		div.innerHTML += 'Accuracy for predicted likes within a 5 like margin : <b>'+parseFloat(k[1]).toPrecision(4)+'%</b><br/>';
	    	}
	    	if(tkns[i].indexOf("accuracy_3") > -1)
	    	{
	    		var k = tkns[i].split("accuracy_3=");
	    		var div = document.getElementById('three');
	    		div.innerHTML += 'Accuracy for predicted likes within a 3 like margin : <b>'+parseFloat(k[1]).toPrecision(4)+'%</b><br/>';
	    	}

	    }

	    for(var i=1;i<=15;i++)
	    {
			// console.log(map['post_id_'])	    		
    		var div = document.getElementById("posts");
    		div.innerHTML += '<div class="col-md-8"><h5>Post ID: <a href="https://facebook.com/' + map['post_id_' + i] + '">' + map['post_id_' + i].split("_")[1] +'</a></h5><p>' + decode_utf8(map['post_msg_'+i]) + '</p><p>Actual likes: <b>' + map['post_likes_'+i] + '</b></p><p>Predicted likes: <b>' + map['post_pred_'+i] + '</b></p></div><br/><br/>'

	    }

		var data = google.visualization.arrayToDataTable(d);

	var options = {
		  chart: {
			 title: 'Top 15 expected likers',
			 subtitle: 'Based on the number of previous posts liked',
		  },
		  bar: { groupWidth: '90%' },
		  bars: 'horizontal',
	   };

	   var chart = new google.charts.Bar(document.getElementById('chart_div'));

	   chart.draw(data, options);
	 }
	  </script>
</body>

</html>
